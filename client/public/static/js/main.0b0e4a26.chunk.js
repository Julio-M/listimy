(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{140:function(e,t,n){},144:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},217:function(e,t,n){},241:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(35),s=n.n(a),i=(n(196),n(3)),o=(n(197),n(328)),l=n(324),j=n(330),u=n(325),d=n(112),b=n(167),h=n(160),O=n.n(h),p=n(329),m=n(319),x=n(321),f=n(318),g=n(320),v=n(37),y=(n(198),n(19)),S=n(1),C=function(e){var t=e.setCurrentUser,n=e.currentUser,r=e.setAccountType,a=Object(y.f)(),s=[n&&"user"===n.account_type?Object(S.jsx)(v.b,{to:"/places",children:Object(S.jsx)("div",{className:"freebar",children:"Freelancers"})}):null],h=c.useState(null),C=Object(i.a)(h,2),k=C[0],N=C[1],w=c.useState(null),_=Object(i.a)(w,2),F=_[0],T=_[1];console.log("From Navbar",n);var P=[Object(S.jsx)(v.b,{className:"profilenav",to:"/myprofile",children:"Profile"}),Object(S.jsx)("div",{onClick:function(){a("/account")},children:"Account"}),Object(S.jsx)("div",{onClick:function(){n&&"user"===n.account_type?fetch("/logout",{method:"DELETE"}).then((function(e){e.ok&&t(null)})).then(a("/login")):fetch("/logout-freelancer",{method:"DELETE"}).then((function(e){e.ok&&t(null)})).then(r("user")).then(a("/login"))},children:"Logout"})],U=function(){N(null)},E=function(){T(null)},A=Object(S.jsxs)(l.a,{sx:{flexGrow:0},children:[Object(S.jsx)(f.a,{title:"Open settings",children:Object(S.jsx)(u.a,{onClick:function(e){T(e.currentTarget)},sx:{p:0},children:Object(S.jsx)(m.a,{alt:"Remy Sharp",src:n?n.profile_picture:null})})}),Object(S.jsx)(b.a,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:F,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(F),onClose:E,children:P.map((function(e){return Object(S.jsx)(g.a,{onClick:E,children:Object(S.jsx)(d.a,{textAlign:"center",children:e})},e)}))})]});return Object(S.jsx)(o.a,{position:"sticky",children:Object(S.jsx)(p.a,{maxWidth:"xxl",children:Object(S.jsxs)(j.a,{disableGutters:!0,children:[Object(S.jsx)(d.a,{variant:"h4",noWrap:!0,component:"div",sx:{mr:2,display:{xs:"none",md:"flex"}},children:n?Object(S.jsx)(v.b,{className:"mylogo",to:"/",children:"listimy"}):Object(S.jsx)(v.b,{className:"mylogo",to:"/login",children:"listimy"})}),Object(S.jsxs)(l.a,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[Object(S.jsx)(u.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){N(e.currentTarget)},color:"inherit",children:Object(S.jsx)(O.a,{})}),Object(S.jsx)(b.a,{id:"menu-appbar",anchorEl:k,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(k),onClose:U,sx:{display:{xs:"block",md:"none"}},children:s.map((function(e){return Object(S.jsx)(g.a,{onClick:U,children:Object(S.jsx)(d.a,{textAlign:"center",children:e})},e)}))})]}),Object(S.jsx)(d.a,{variant:"h4",noWrap:!0,component:"div",sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:"listimy"}),Object(S.jsx)(l.a,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:s.map((function(e){return Object(S.jsx)(x.a,{onClick:U,sx:{my:2,color:"white",display:"block"},children:e},e)}))}),n?A:null]})})})},k=n(21),N=n(313),w=(n(140),n(322)),_=n(314),F=n(161),T=n.n(F);var P=function(e){var t=e.setSearchParams,n=Object(y.f)(),r=Object(c.useState)([]),a=Object(i.a)(r,2),s=a[0],o=a[1],l=Object(c.useState)(s[0]),j=Object(i.a)(l,2),u=j[0],d=j[1],b=Object(c.useState)(""),h=Object(i.a)(b,2),O=h[0],p=h[1];return Object(c.useEffect)((function(){fetch("/services").then((function(e){e.ok?e.json().then((function(e){var t=e.map((function(e){return e.service_name}));o(t)})):console.log(e.json())}))}),[]),Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(w.a,{container:!0,spacing:0,direction:"row",alignItems:"center",justifyContent:"center",style:{minHeight:"50vh"},children:[Object(S.jsx)(w.a,{item:!0,xs:4,children:Object(S.jsx)(_.a,{value:u,onChange:function(e,t){d(t)},inputValue:O,disablePortal:!0,id:"combo-box-demo",options:s,onInputChange:function(e,t){p(t)},renderInput:function(e){return Object(S.jsx)(N.a,Object(k.a)(Object(k.a)({},e),{},{style:{width:"100%"},id:"service",label:"Service"}))}})}),Object(S.jsx)(w.a,{item:!0,xs:0,children:Object(S.jsx)(x.a,{onClick:function(e){t({service_name:u}),u&&n({pathname:"/places?service_name=".concat(u)})},children:Object(S.jsx)(T.a,{className:"searchIcon"})})})]})})};n(207);var U=function(e){var t=e.categories,n=e.setSearchParams,c=Object(y.f)(),r=t.category_picture,a=t.category_name;return Object(S.jsxs)("div",{className:"card",onClick:function(e){n({category_name:a}),c({pathname:"/places?category_name=".concat(a)})},children:[Object(S.jsx)("img",{className:"picture",src:r,alt:"myimgae"}),Object(S.jsx)("div",{class:"text",children:a})]})};var E=function(e){var t=e.categories,n=e.setSearchParams,c=t.map((function(e){return Object(S.jsx)(w.a,{item:!0,xs:12,sm:12,md:4,children:Object(S.jsx)(U,{categories:e,setSearchParams:n})})}));return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h3",{className:"title",children:"Services"}),Object(S.jsx)(w.a,{container:!0,spacing:2,children:c})]})};var A=function(e){e.selectCategory;var t=e.setSearchParams,n=(e.searchParams,Object(c.useState)([])),r=Object(i.a)(n,2),a=r[0],s=r[1];return Object(c.useEffect)((function(){fetch("http://127.0.0.1:3000/categories").then((function(e){return e.json()})).then((function(e){return s(e)})).catch((function(e){return console.log(e.message)}))}),[]),Object(S.jsxs)("div",{className:"main",children:[Object(S.jsx)("div",{class:"hero-image",children:Object(S.jsx)(P,{setSearchParams:t})}),Object(S.jsx)("div",{className:"categories",children:Object(S.jsx)(E,{setSearchParams:t,categories:a})})]})},L=n(4),B=(n(208),n(315)),D=n(323),M=n(331);var z=function(e){var t=e.onLogin,n=e.accountType,r=e.setAccountType,a=Object(y.f)(),s=Object(c.useState)({username:"",password:""}),o=Object(i.a)(s,2),l=o[0],j=o[1],u=Object(c.useState)([]),d=Object(i.a)(u,2),b=d[0],h=d[1],O=Object(c.useState)(!1),p=Object(i.a)(O,2),m=p[0],f=p[1],g=l.username,v=l.password,C=function(e){var t=e.target.name,n=e.target.value;j(Object(k.a)(Object(k.a)({},l),{},Object(L.a)({},t,n)))},N=function(e){var t=e.target.value;r(t)};return Object(S.jsxs)("div",{className:"login-box",id:"sBoxColor",children:[Object(S.jsx)("h2",{children:"user"===n?"User Login":"Freelancer Login"}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),"user"===n?fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(e){f(!1),e.ok?e.json().then((function(e){return t(e)})).then(a("/")):e.json().then((function(e){return h(e.errors)}))})):fetch("/login-freelancer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(e){f(!1),e.ok?e.json().then((function(e){return t(e)})).then(a("/myprofile")):e.json().then((function(e){return h(e.errors)}))}))},children:[Object(S.jsxs)("div",{className:"user-box",children:[Object(S.jsx)("input",{onChange:C,type:"text",name:"username",required:"true",value:g}),Object(S.jsx)("label",{children:"Username"})]}),Object(S.jsxs)("div",{className:"user-box",children:[Object(S.jsx)("input",{onChange:C,type:"password",name:"password",required:"true",value:v}),Object(S.jsx)("label",{children:"Password"})]}),Object(S.jsx)("div",{className:"radiobutton",children:Object(S.jsxs)(D.a,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"user",name:"radio-buttons-group",children:[Object(S.jsx)(M.a,{onChange:N,value:"user",control:Object(S.jsx)(B.a,{style:{color:"white"}}),label:"Log in as a User"}),Object(S.jsx)(M.a,{onChange:N,value:"freelancer",control:Object(S.jsx)(B.a,{style:{color:"white"}}),label:"Log in as a Freelancer"})]})}),Object(S.jsx)(x.a,{type:"submit",id:"submitLogin",children:m?"Loading...":"Login"}),Object(S.jsxs)("div",{children:[" ",b.map((function(e){return Object(S.jsx)("p",{children:e},e)}))]}),Object(S.jsx)("div",{className:"sbutton",children:Object(S.jsx)(x.a,{onClick:function(){a("/signup-user")},id:"go-to-sign-up",children:"Go to Sign Up"})})]})]})};n(209);var I=function(e){var t=e.onLogin,n=e.accountType,r=e.setAccountType,a=Object(y.f)(),s=Object(c.useState)({username:"",email:"",password:"",password_confirmation:""}),o=Object(i.a)(s,2),l=o[0],j=o[1],u=Object(c.useState)([]),d=Object(i.a)(u,2),b=d[0],h=d[1],O=Object(c.useState)(!1),p=Object(i.a)(O,2),m=p[0],f=p[1],g=l.username,v=l.email,C=l.password,N=l.password_confirmation,w=function(e){var t=e.target.value;r(t)},_=function(e){var t=e.target.name,n=e.target.value;j(Object(k.a)(Object(k.a)({},l),{},Object(L.a)({},t,n)))};return Object(S.jsxs)("div",{className:"login-box",id:"sBoxColor",children:[Object(S.jsx)("h2",{children:"Sign Up as ".concat(n)}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h([]),f(!0),console.log("clicked"),"user"===n?fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(l)}).then((function(e){e.ok?e.json().then((function(e){return t(e)})).then(a("/")):e.json().then((function(e){return h(e.errors)}))})):fetch("/signup-freelancer",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(l)}).then((function(e){e.ok?e.json().then((function(e){return t(e)})).then(a("/")):e.json().then((function(e){return h(e.errors)}))}))},children:[Object(S.jsxs)("div",{className:"user-box",children:[Object(S.jsx)("input",{onChange:_,type:"text",name:"username",required:"true",value:g}),Object(S.jsx)("label",{children:"Username"})]}),Object(S.jsxs)("div",{className:"user-box",children:[Object(S.jsx)("input",{onChange:_,type:"email",name:"email",required:"true",value:v}),Object(S.jsx)("label",{children:"Email"})]}),Object(S.jsxs)("div",{className:"user-box",children:[Object(S.jsx)("input",{onChange:_,type:"password",name:"password",required:"true",value:C}),Object(S.jsx)("label",{children:"Password"})]}),Object(S.jsxs)("div",{className:"user-box",children:[Object(S.jsx)("input",{onChange:_,type:"password",name:"password_confirmation",required:"true",value:N}),Object(S.jsx)("label",{children:"Confirm Password"})]}),Object(S.jsx)("div",{className:"radiobutton",children:Object(S.jsxs)(D.a,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"user",name:"radio-buttons-group",children:[Object(S.jsx)(M.a,{onChange:w,value:"user",control:Object(S.jsx)(B.a,{style:{color:"white"}}),label:"Signup as a User"}),Object(S.jsx)(M.a,{onChange:w,value:"freelancer",control:Object(S.jsx)(B.a,{style:{color:"white"}}),label:"Signup as a Freelancer"})]})}),Object(S.jsx)(x.a,{type:"submit",id:"submitLogin",children:m?"Loading...":"Sign Up"}),Object(S.jsxs)("div",{children:[" ",b.map((function(e){return Object(S.jsx)("p",{children:e})}))]}),Object(S.jsx)("div",{className:"sbutton",children:Object(S.jsx)(x.a,{onClick:function(){a("/login")},id:"go-to-login",children:"Go to LogIn"})})]})]})},J=(n(210),n(5)),V=n(326),W=n(317),R=n(335),G=n(336),q=n(338),H=n(334),K=n(337);var Y=function(e){var t=e.myServices,n=e.setMyServices,c=e.currentUser,r=function(e){var c,r=parseInt(e.target.value);c=r,fetch("services/".concat(c),{method:"DELETE"}).then(n(t.filter((function(e){return c!==e.id})))).catch((function(e){return console.log(e.message)}))};return Object(S.jsx)(H.a,{children:Object(S.jsx)(R.a,{sx:{minWidth:"100%"},"aria-label":"simple table",children:Object(S.jsx)(G.a,{children:t.map((function(e){return Object(S.jsxs)(K.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(S.jsx)(q.a,{component:"th",scope:"row",children:e.service_name}),Object(S.jsxs)(q.a,{align:"right",children:["$",e.service_price]}),Object(S.jsx)(q.a,{align:"right",children:"freelancer"===c.account_type?Object(S.jsx)(x.a,{onClick:r,value:e.id,style:{color:"red"},children:"Remove"}):null})]},e.service_name)}))})})})},$=n(17),Q=n(333);var X=function(e){var t=e.currentUser,n=e.setMyServices,r=e.myServices,a=e.setOpenService,s=Object(c.useState)([]),o=Object(i.a)(s,2),j=o[0],u=o[1],d=Object(c.useState)([]),b=Object(i.a)(d,2),h=b[0],O=b[1];Object(c.useEffect)((function(){fetch("http://127.0.0.1:3000/categories").then((function(e){return e.json()})).then((function(e){return O(e)})).catch((function(e){return console.log(e.message)}))}),[]);var p=Object(c.useState)({service_name:"",service_price:0,category_id:0,freelancer_id:t.id}),m=Object(i.a)(p,2),f=m[0],v=m[1],y=function(e){var t=e.target.name,n=e.target.value;v(Object(k.a)(Object(k.a)({},f),{},Object(L.a)({},t,n)))},C=h.map((function(e){return Object(S.jsx)(g.a,{value:e.id,children:e.category_name},e.id)}));return Object(S.jsx)(Q.a,{onSubmit:function(e){e.preventDefault(),console.log("clicked"),fetch("/service-create",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(f)}).then((function(e){e.ok?e.json().then((function(e){return n([].concat(Object($.a)(r),[e]))})).then(a(!1)):e.json().then((function(e){return u(e.errors)}))}))},children:Object(S.jsxs)(l.a,{component:"form",sx:{"& > :not(style)":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[Object(S.jsx)(N.a,{onChange:y,id:"outlined-basic",name:"service_name",label:"Service",variant:"outlined",value:f.service_name}),Object(S.jsx)(N.a,{onChange:y,id:"outlined-basic",name:"service_price",label:"Price",variant:"outlined",type:"number",value:f.service_price}),Object(S.jsx)(N.a,{name:"category_id",id:"filled-select-currency",select:!0,label:"Select",value:f.category_id,onChange:y,helperText:"Please select your category",variant:"filled",children:C}),Object(S.jsx)(x.a,{type:"submit",children:"Add"}),Object(S.jsx)("div",{children:j.map((function(e){return Object(S.jsx)("p",{children:e})}))})]})})};n(211);var Z=function(e){var t=e.myBookings,n=e.setMyBookings,c=e.viewFreelancer,r=function(e){var c,r=parseInt(e.target.value);c=r,fetch("bookings/".concat(c),{method:"DELETE"}).then(n(t.filter((function(e){return c!==e.id})))).catch((function(e){return console.log(e.message)}))},a=t.map((function(e){return Object(S.jsxs)(K.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(S.jsxs)(q.a,{component:"th",scope:"row",children:[Object(S.jsx)("img",{className:"profile-pic-book",src:e.user.profile_picture,alt:"some profile"}),e.user.username]}),Object(S.jsx)(q.a,{align:"right",children:e.service?e.service.service_name:"TBD"}),Object(S.jsxs)(q.a,{align:"right",children:[Object(S.jsx)("img",{className:"profile-pic-book",src:e.freelancer.profile_picture,alt:"some profile"}),e.freelancer.username]}),Object(S.jsx)(q.a,{align:"right",children:e.booking_date}),Object(S.jsx)(q.a,{align:"right",children:c?null:Object(S.jsx)(x.a,{onClick:r,value:e.id,style:{color:"red"},children:"Remove"})})]},e.id)}));return Object(S.jsx)(H.a,{children:Object(S.jsx)(R.a,{sx:{minWidth:"100%"},"aria-label":"simple table",children:Object(S.jsx)(G.a,{children:t?a:Object(S.jsx)("p",{children:"No bookings"})})})})},ee=Object(J.a)(V.a)((function(e){var t=e.theme;return Object(k.a)(Object(k.a)({backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff"},t.typography.body2),{},{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})})),te={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:300,width:300,bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,p:4,textAlign:"center"};var ne=function(e){var t=e.currentUser,n=Object(c.useState)([]),a=Object(i.a)(n,2),s=a[0],o=a[1],j=function(e){fetch("bookings/".concat(e,"/").concat(t.id)).then((function(e){return e.json()})).then((function(e){return o(e)})).catch((function(e){return console.log(e.message)}))};Object(c.useEffect)((function(){"user"===t.account_type?j("users"):j("freelancers")}),[]);var u=Object(c.useState)(t.services),d=Object(i.a)(u,2),b=d[0],h=d[1],O=Object(c.useState)("profile"),p=Object(i.a)(O,2),m=p[0],f=p[1],g=r.a.useState(!1),v=Object(i.a)(g,2),y=v[0],C=v[1],k=function(e){var t=e.target.name;f(t),C(!0)},N=Object(c.useState)(!1),_=Object(i.a)(N,2),F=_[0],T=_[1],P=Object(c.useState)(!1),U=Object(i.a)(P,2),E=U[0],A=U[1],L=function(){C(!1),T(!1),A(!1)},B=t.reviews.map((function(e){return e.stars})).reduce((function(e,t){return e+t}),0)/t.reviews.length,D=Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(w.a,{id:"photo-grid",item:!0,xs:6,children:[Object(S.jsx)(ee,{className:"title-comp",children:"Photo Album"}),Object(S.jsx)(ee,{id:"service-photos",children:Object(S.jsx)("img",{className:"service-pics",src:t.services_photos,alt:"service"})})]}),Object(S.jsxs)(w.a,{zeroMinWidth:!0,id:"services-prices",item:!0,xs:6,children:[Object(S.jsxs)(ee,{className:"title-comp-free",children:["Services & Prices ",Object(S.jsx)(x.a,{onClick:function(){T(!0)},children:"+ Add Service"})]}),Object(S.jsx)(ee,{className:"services-cont-free",children:Object(S.jsx)(Y,{myServices:b,setMyServices:h,setMyBookings:o,currentUser:t})})]})]});return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(l.a,{className:"profilepage",children:Object(S.jsxs)(w.a,{container:!0,spacing:3,children:[Object(S.jsx)(w.a,{item:!0,xs:12,children:Object(S.jsx)("img",{className:"cover-photo",name:"cover",onClick:k,src:t.cover_photo,alt:"cover"})}),Object(S.jsx)(w.a,{zeroMinWidth:!0,item:!0,xs:4,children:Object(S.jsxs)("div",{className:"profile",children:[Object(S.jsx)("img",{className:"profile-picture",name:"profile",onClick:k,src:t.profile_picture,alt:"profile"}),Object(S.jsxs)("div",{className:"presonalinfo",children:[Object(S.jsx)("h3",{className:"username",children:t.username}),Object(S.jsx)("p",{className:"Location",children:t.email}),Object(S.jsxs)("p",{className:"account-type",children:["Type: ",t.services?"Freelancer":"Client"]}),Object(S.jsx)("p",{children:"freelancer"===t.account_type?t.location:null}),"freelancer"===t.account_type?Object(S.jsxs)("p",{className:"account-type",children:[B,"/5"]}):null]})]})}),Object(S.jsxs)(w.a,{zeroMinWidth:!0,item:!0,xs:12,children:[Object(S.jsx)(ee,{className:"title-comp-free",id:"bookingtitle",onClick:function(){A(!0)},children:"Bookings"}),Object(S.jsx)(ee,{className:"services-cont-book",children:Object(S.jsx)(Z,{myBookings:s,setMyBookings:o})})]}),t&&"user"===t.account_type?null:D]})}),Object(S.jsx)("div",{children:Object(S.jsx)(W.a,{open:y,onClose:L,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(S.jsx)(l.a,{sx:te,children:Object(S.jsx)("img",{className:"modal",src:"profile"===m?t.profile_picture:t.cover_photo,alt:"profile"})})})}),Object(S.jsx)("div",{children:Object(S.jsx)(W.a,{open:F,onClose:L,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(S.jsx)(l.a,{sx:te,children:Object(S.jsx)(X,{currentUser:t,setMyServices:h,myServices:b,setOpenService:T})})})}),Object(S.jsx)("div",{children:Object(S.jsx)(W.a,{open:E,onClose:L,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(S.jsx)(l.a,{sx:te})})})]})},ce=n(68),re=n.n(ce),ae=n(162),se=n(110),ie=n(83),oe=(n(142),function(e){e.selected;var t=e.setSelected,n=e.setCenter,c=Object(se.a)(),r=c.ready,a=c.value,s=c.setValue,i=c.suggestions,o=i.status,l=i.data,j=c.clearSuggestions,u=function(){var e=Object(ae.a)(re.a.mark((function e(c){var r,a,i,o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(c,!1),j(),e.next=4,Object(se.b)({address:c});case 4:return r=e.sent,e.next=7,Object(se.c)(r[0]);case 7:a=e.sent,i=a.lat,o=a.lng,t({lat:i,lng:o}),n({lat:i,lng:o});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(ie.a,{onSelect:u,children:[Object(S.jsx)(ie.b,{value:a,onChange:function(e){return s(e.target.value)},disabled:!r,className:"combobox-input",placeholder:"Search address here..."}),Object(S.jsx)(ie.e,{children:Object(S.jsx)(ie.c,{children:"OK"===o&&l.map((function(e){var t=e.place_id,n=e.description;return Object(S.jsx)(ie.d,{value:n},t)}))})})]})}),le=function(e){var t=e.setSearchName,n=e.selected,c=e.setSelected,r=e.setCenter;return Object(S.jsxs)(l.a,{sx:{py:2,display:"grid",gridAutoColumns:"1fr",gap:1},children:[Object(S.jsx)(w.a,{item:!0,sx:{gridRow:"1",gridColumn:"span 1"},children:Object(S.jsx)(N.a,{style:{width:"100%"},id:"service",label:"Service",onChange:function(e){return t(e.target.value)}})}),Object(S.jsx)(w.a,{item:!0,sx:{gridRow:"1",gridColumn:"4 / 5"},children:Object(S.jsx)(oe,{setSelected:c,selected:n,setCenter:r})})]})},je=n(63),ue=(n(212),n(90)),de=n.n(ue),be=function(e){var t=e.selected,n=e.freelancerData,r=e.services,a=e.setServices,s=e.center;e.setCenter;de.a.setApiKey("");var o=Object(c.useRef)(),l=Object(c.useState)(null),j=Object(i.a)(l,2),u=j[0],d=j[1],b=Object(c.useCallback)((function(e){return o.current=e}),[]);return Object(c.useEffect)((function(){var e=[];n.map((function(t){de.a.fromAddress(t.location).then((function(t){var n=t.results[0].geometry.location,c=n.lat,r=n.lng;e.push({lat:c,lng:r})}))})),a(e)}),[]),Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(je.a,{zoom:14,center:s,mapContainerClassName:"map_container",onLoad:b,children:[t&&Object(S.jsxs)(S.Fragment,{children:[r.map((function(e){return Object(S.jsx)(je.c,{position:e,onClick:function(){return d({service:e})},children:u?Object(S.jsx)(je.b,{position:s,visible:!0,onCloseClick:function(){return d(null)},children:Object(S.jsx)("div",{children:"Service: Info"})}):null})})),Object(S.jsx)(je.c,{position:t})]}),Object(S.jsx)(je.c,{position:s})]})})},he=n(309),Oe=n(308),pe=n(340),me=n(339),xe=n(105),fe=n.n(xe),ge=n(341),ve=n(327),ye=function(e){e.setSelected;var t=e.setCenter,n=e.freelancer,r=e.setViewFreelancer,a=Object(y.f)(),s=Object(c.useState)([]),o=Object(i.a)(s,2),l=o[0],j=o[1],u=Object(c.useState)(!1),b=Object(i.a)(u,2),h=b[0],O=b[1];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(me.a,{onClick:function(){r(n),fetch("/show-freelancer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){e.ok?e.json().then((function(e){return r(e)})):e.json().then((function(e){return j(e.errors)}))})),de.a.fromAddress(n.location).then((function(e){var n=e.results[0].geometry.location,c=n.lat,r=n.lng;console.log({lat:c,lng:r}),t({lat:c,lng:r})}))},alignItems:"flex-start",children:[Object(S.jsx)(pe.a,{children:Object(S.jsx)(m.a,{alt:"profile picture",src:n.profile_picture})}),Object(S.jsx)(Oe.a,{primary:n.username,secondary:Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(d.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:n.location?n.location:n.location="144 Fulton St, New York, NY, 10038"})})}),Object(S.jsx)(f.a,{title:"Click for more",children:Object(S.jsx)(fe.a,{expand:h,onClick:function(){O(!h)},children:Object(S.jsx)(fe.a,{})})})]}),Object(S.jsx)(ge.a,{in:h,timeout:"auto",unmountOnExit:!0,children:Object(S.jsxs)(ve.a,{component:"div",disablePadding:!0,children:[n.services.map((function(e){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Oe.a,{primary:e.service_name}),Object(S.jsx)(he.a,{})]})})),Object(S.jsx)(x.a,{onClick:function(){a("/freelancer")},children:"Go to profile"}),Object(S.jsxs)("div",{children:[" ",l.map((function(e){return Object(S.jsx)("p",{children:e},e)}))]})]})})]})},Se=(n(213),function(e){var t=e.searchParams,n=e.freelancerData,r=e.services,a=e.setServices,s=e.setViewFreelancer,o=Object(c.useState)({lat:40.70705345683868,lng:-74.01128952515276}),j=Object(i.a)(o,2),u=j[0],d=j[1],b=Object(c.useState)(null),h=Object(i.a)(b,2),O=h[0],p=h[1],m=Object(c.useState)(""),x=Object(i.a)(m,2),f=x[0],g=x[1],v=t.get("category_name"),y=t.get("service_name"),C=Object(je.d)({googleMapsApiKey:"",libraries:["places"]}).isLoaded,k=n.filter((function(e){return v?e.categories.find((function(e){return e.category_name===v})):y?e.services.find((function(e){return e.service_name===y})):f?e.username.toLowerCase().includes(f.toLowerCase()):e}));return Object(S.jsxs)(l.a,{sx:{px:5},children:[Object(S.jsx)(le,{setSearchName:g,setSelected:p,selected:O,setCenter:d}),Object(S.jsx)("div",{className:"map",children:Object(S.jsxs)(w.a,{container:!0,spacing:2,children:[Object(S.jsx)(w.a,{xs:12,md:4,children:Object(S.jsx)(ve.a,{sx:{width:"100%",bgcolor:"background.paper"},children:0!==n.length?k.map((function(e){return Object(S.jsx)(ye,{setSelected:p,setCenter:d,setViewFreelancer:s,freelancer:e})})):Object(S.jsx)("h1",{children:"Loading....."})})}),Object(S.jsx)(w.a,{xs:12,md:8,children:C?Object(S.jsx)(be,{selected:O,center:u,setCenter:d,freelancerData:n,services:r,setServices:a}):Object(S.jsx)("div",{children:"Loading..."})})]})})]})}),Ce=(n(214),n(310)),ke=n(163),Ne=n(311);var we=function(e){var t=e.viewFreelancer,n=e.setMyBookings,r=e.currentUser,a=e.myBookings,s=e.setOpenService,o=Object(c.useState)([]),j=Object(i.a)(o,2),u=j[0],d=j[1],b=Object(c.useState)(new Date("2022-01-18T21:11:54")),h=Object(i.a)(b,2),O=h[0],p=h[1],m=Object(c.useState)({service_id:0,user_id:r.id,freelancer_id:t.id}),f=Object(i.a)(m,2),v=f[0],y=f[1],C=t.services.map((function(e){return Object(S.jsx)(g.a,{value:e.id,children:e.service_name},e.id)}));return Object(S.jsx)(Q.a,{onSubmit:function(e){e.preventDefault(),console.log("clicked"),fetch("/bookings",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(v)}).then((function(e){e.ok?e.json().then((function(e){return n([].concat(Object($.a)(a),[e]))})).then(s(!1)):e.json().then((function(e){return d(e.errors)}))}))},children:Object(S.jsxs)(l.a,{component:"form",sx:{"& > :not(style)":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[Object(S.jsx)(N.a,{name:"service_id",id:"filled-select-currency",select:!0,label:"Select",value:v.ser,onChange:function(e){var t,n=e.target.name,c=e.target.value;y(Object(k.a)(Object(k.a)({},v),{},(t={},Object(L.a)(t,n,c),Object(L.a)(t,"booking_date","".concat(O.getMonth()+1,"/").concat(O.getDate(),"/").concat(O.getFullYear()," @ ").concat(O.getHours(),":").concat(O.getMinutes())),t)))},helperText:"Please select a service",variant:"filled",children:C}),Object(S.jsx)(ke.a,{dateAdapter:Ce.a,children:Object(S.jsx)(Ne.a,{name:"booking_date",value:O,onChange:function(e){p(e)},renderInput:function(e){return Object(S.jsx)(N.a,Object(k.a)({},e))}})}),Object(S.jsx)(x.a,{type:"submit",children:"Request Booking"}),Object(S.jsx)("div",{children:u.map((function(e){return Object(S.jsx)("p",{children:e})}))})]})})},_e=(n(144),n(165)),Fe=n.n(_e);var Te=function(e){var t=e.reviews,n=e.setReviews,c=e.currentUser,r=function(e){var c,r=parseInt(e.target.value);c=r,fetch("reviews/".concat(c),{method:"DELETE"}).then(n(t.filter((function(e){return c!==e.id})))).catch((function(e){return console.log(e.message)}))},a=t.map((function(e){return Object(S.jsxs)(K.a,{sx:{"&:last-child td, &:last-child th":{border:0}},hover:!0,value:e.id,children:[Object(S.jsxs)(q.a,{sx:{borderBottom:"none"},component:"th",scope:"row",children:[Object(S.jsx)("img",{className:"profile-pic-book",src:e.user.profile_picture,alt:"some profile"}),e.user.username]}),Object(S.jsx)(q.a,{sx:{borderBottom:"none"},align:"right",children:e.comment}),Object(S.jsx)(q.a,{sx:{borderBottom:"none"},align:"right",children:e.user.id===c.id?Object(S.jsx)(x.a,{value:e.id,onClick:r,style:{color:"red"},children:"\ud83d\uddd1"}):null})]},e.id)}));return Object(S.jsx)(H.a,{className:"reviews-block",children:Object(S.jsx)(R.a,{sx:{minWidth:"100%"},"aria-label":"simple table",children:Object(S.jsx)(G.a,{children:a})})})};var Pe=function(e){var t=e.viewFreelancer,n=e.currentUser,r=Object(c.useState)([]),a=Object(i.a)(r,2),s=a[0],o=a[1],l=Object(c.useState)([]),j=Object(i.a)(l,2),u=j[0],d=j[1],b=Object(c.useState)({freelancer_id:t.id,user_id:n.id,stars:0,comment:""}),h=Object(i.a)(b,2),O=h[0],p=h[1];Object(c.useEffect)((function(){fetch("/reviews/freelancers/".concat(t.id)).then((function(e){return e.json()})).then((function(e){return d(e)})).catch((function(e){return console.log(e.message)}))}),[]);var m=O.comment;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"myform",children:Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/reviews",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(O)}).then((function(e){e.ok?e.json().then((function(e){return d([].concat(Object($.a)(u),[e]))})):e.json().then((function(e){return o(e.errors)}))}))},className:"myform",children:[Object(S.jsx)(Fe.a,{count:5,onChange:function(e){p(Object(k.a)(Object(k.a)({},O),{},{stars:e}))},size:24,activeColor:"#ffd700"}),Object(S.jsx)(N.a,{onChange:function(e){var t=e.target.name,n=e.target.value;p(Object(k.a)(Object(k.a)({},O),{},Object(L.a)({},t,n)))},id:"outlined-multiline-static",label:"Comment",name:"comment",value:m,multiline:!0,rows:4}),Object(S.jsx)("div",{children:s.map((function(e){return Object(S.jsx)("p",{children:e})}))}),Object(S.jsx)(x.a,{type:"submit",children:"Post your review"})]})}),Object(S.jsx)("div",{className:"reviews-table",children:Object(S.jsx)(Te,{reviews:u,setReviews:d,currentUser:n})})]})},Ue=Object(J.a)(V.a)((function(e){var t=e.theme;return Object(k.a)(Object(k.a)({backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff"},t.typography.body2),{},{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})})),Ee={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:300,width:300,bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,p:4,textAlign:"center"};var Ae=function(e){var t=e.viewFreelancer,n=e.currentUser,a=Object(c.useState)(t.services),s=Object(i.a)(a,2),o=s[0],j=(s[1],Object(c.useState)([])),u=Object(i.a)(j,2),d=u[0],b=u[1];Object(c.useEffect)((function(){fetch("bookings/".concat(t.id)).then((function(e){return e.json()})).then((function(e){return b(e)})).catch((function(e){return console.log(e.message)}))}),[]);var h=Object(c.useState)("profile"),O=Object(i.a)(h,2),p=O[0],m=O[1],f=Object(c.useState)(!1),g=Object(i.a)(f,2),v=g[0],y=g[1],C=r.a.useState(!1),k=Object(i.a)(C,2),N=k[0],_=k[1],F=function(e){var t=e.target.name;m(t),_(!0)},T=function(){_(!1),y(!1)};console.log(t);var P=t.reviews.map((function(e){return e.stars})).reduce((function(e,t){return e+t}),0)/t.reviews.length,U=Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(w.a,{id:"photo-grid-margs",item:!0,xs:6,children:[Object(S.jsx)(Ue,{className:"title-comp",children:"Photo Album"}),Object(S.jsx)(Ue,{id:"service-photos",children:Object(S.jsx)("img",{className:"service-pics",src:t.services_photos,alt:"color"})})]}),Object(S.jsxs)(w.a,{id:"services-prices",item:!0,xs:6,children:[Object(S.jsx)(Ue,{className:"title-comp",children:"Services & Prices"}),Object(S.jsx)(Ue,{className:"services-cont",children:Object(S.jsx)(Y,{myServices:o,currentUser:n})}),Object(S.jsx)(Ue,{children:Object(S.jsx)(x.a,{onClick:function(){y(!0)},children:"Book an appointment"})})]})]});return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(l.a,{className:"profilepage",children:Object(S.jsxs)(w.a,{container:!0,spacing:2,children:[Object(S.jsx)(w.a,{item:!0,xs:12,children:Object(S.jsx)("img",{className:"cover-photo",name:"cover",onClick:F,src:t.cover_photo,alt:"cover"})}),Object(S.jsx)(w.a,{item:!0,xs:4,children:Object(S.jsxs)("div",{className:"profile",children:[Object(S.jsx)("img",{className:"profile-picture",name:"profile",onClick:F,src:t.profile_picture,alt:"profile"}),Object(S.jsxs)("div",{className:"presonalinfo",children:[Object(S.jsx)("h3",{className:"username",children:t.username}),Object(S.jsx)("p",{className:"Location",children:t.email}),Object(S.jsxs)("p",{className:"account-type",children:["Type: ",t.services?"Freelancer":"Client"]}),Object(S.jsxs)("p",{className:"account-type",children:[P,"/5"]})]})]})}),Object(S.jsxs)(w.a,{zeroMinWidth:!0,item:!0,xs:12,children:[Object(S.jsx)(Ue,{className:"title-comp-free",children:"Bookings"}),Object(S.jsx)(Ue,{className:"services-cont-book",children:Object(S.jsx)(Z,{myBookings:d,setMyBookings:b,viewFreelancer:t})})]}),t&&"user"===t.account_type?null:U,Object(S.jsxs)(w.a,{zeroMinWidth:!0,item:!0,xs:12,children:[Object(S.jsx)(Ue,{children:"Reviews"}),Object(S.jsx)(Ue,{className:"reviews-cont",children:Object(S.jsx)(Pe,{currentUser:n,viewFreelancer:t})})]})]})}),Object(S.jsx)("div",{children:Object(S.jsx)(W.a,{open:N,onClose:T,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(S.jsx)(l.a,{sx:Ee,children:Object(S.jsx)("img",{className:"modal",src:"profile"===p?t.profile_picture:t.cover_photo,alt:"profile"})})})}),Object(S.jsx)("div",{children:Object(S.jsx)(W.a,{open:v,onClose:T,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(S.jsx)(l.a,{sx:Ee,children:Object(S.jsx)(we,{viewFreelancer:t,currentUser:n,setMyBookings:b,myBookings:d,setOpenService:y})})})})]})},Le=(n(217),n(126)),Be=n.n(Le);var De=function(e){var t=e.currentUser,n=e.setCurrentUser,r=Object(y.f)(),a=Object(c.useState)(!1),s=Object(i.a)(a,2),o=s[0],l=s[1],j=Object(c.useState)({}),u=Object(i.a)(j,2),d=u[0],b=u[1],h=Object(c.useState)(!1),O=Object(i.a)(h,2),p=O[0],m=O[1],f=Object(c.useState)(!1),g=Object(i.a)(f,2),v=g[0],C=g[1],N=Object(c.useState)(""),w=Object(i.a)(N,2),_=w[0],F=w[1],T=t.account_type,P=function(e){var t=e.target.name,n=e.target.value;console.log("Name",t),console.log("Value",n),b(Object(k.a)(Object(k.a)({},d),{},Object(L.a)({},t,n)))},U=Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"user-box",children:[Object(S.jsx)("input",{onChange:P,type:"text",name:"location"}),Object(S.jsx)("label",{children:"Location"})]})});return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"edit-box",id:"sBoxColor",children:[Object(S.jsx)("h2",{children:"Edit your profile"}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("Sent data"),fetch("/update-profile",{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){return n((function(){return t.id===e.id?e:t}))})).then(l(!0)).catch((function(e){return console.log(e.message)}))},children:[Object(S.jsxs)("div",{className:"user-box",children:[Object(S.jsx)("input",{onChange:function(e){var t=e.target.files[0];F(t)},name:"profile-picture",type:"file"}),Object(S.jsx)(x.a,{onClick:function(e){var t=new FormData;t.append("file",_),t.append("upload_preset","dyza3ykz"),Be.a.post("https://api.cloudinary.com/v1_1/dimfaeuml/image/upload",t,{onUploadProgress:function(e){100===Math.round(e.loaded/e.total*100)&&m(!0)}}).then((function(e){return b(Object(k.a)(Object(k.a)({},d),{},{profile_picture:e.data.secure_url}))}))},className:"upload btn-upload",id:"btn-upload-profile",children:"Upload Profile Picture"}),p?Object(S.jsx)("p",{className:"upload",children:"Done"}):null,Object(S.jsx)("label",{children:"Change your profile picture"})]}),Object(S.jsxs)("div",{className:"user-box",children:[Object(S.jsx)("input",{onChange:function(e){var t=e.target.files[0];F(t)},name:"cover_photo",type:"file"}),Object(S.jsx)(x.a,{onClick:function(e){var t=new FormData;t.append("file",_),t.append("upload_preset","dyza3ykz"),Be.a.post("https://api.cloudinary.com/v1_1/dimfaeuml/image/upload",t,{onUploadProgress:function(e){100===Math.round(e.loaded/e.total*100)&&C(!0)}}).then((function(e){return b(Object(k.a)(Object(k.a)({},d),{},{cover_photo:e.data.secure_url}))}))},className:"upload btn-upload",id:"btn-upload-cover",children:"Upload Cover Photo"}),v?Object(S.jsx)("p",{className:"upload",children:"Done"}):null,Object(S.jsx)("label",{children:"Change your cover photo"})]}),Object(S.jsxs)("div",{className:"user-box",children:[Object(S.jsx)("input",{onChange:P,type:"text",name:"username"}),Object(S.jsx)("label",{children:"Username"})]}),"user"===T?null:U,Object(S.jsx)(x.a,{type:"submit",id:"submitEdit",children:"Submit"}),o?Object(S.jsx)("p",{className:"upload",children:"Done"}):null,Object(S.jsx)("div",{className:"sbutton",children:Object(S.jsx)(x.a,{onClick:function(){var e;e=t.id,fetch("users/".concat(e),{method:"DELETE"}).then(n(null)).then(r("/login")).catch((function(e){return console.log(e.message)}))},id:"go-to-sign-up",children:"Delete User"})})]})]})})};var Me=function(){var e=Object(c.useState)("user"),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),s=Object(i.a)(a,2),o=s[0],l=s[1],j=Object(c.useState)([]),u=Object(i.a)(j,2),d=u[0],b=u[1],h=Object(c.useState)([]),O=Object(i.a)(h,2),p=O[0],m=O[1],x=Object(v.c)(),f=Object(i.a)(x,2),g=f[0],k=f[1],N=Object(c.useState)(null),w=Object(i.a)(N,2),_=w[0],F=w[1];Object(c.useEffect)((function(){fetch("/me").then((function(e){e.ok?e.json().then((function(e){return l(e)})):console.log(o)})),fetch("/me-freelancer").then((function(e){e.ok?e.json().then((function(e){F(e)})):console.log("Not good")}))}),[]),Object(c.useEffect)((function(){fetch("/freelancers").then((function(e){e.ok?e.json().then((function(e){return b(e)})):console.log(e.json())}))}),[]);var T=Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,{path:"/",element:Object(S.jsx)(A,{setSearchParams:k,searchParams:g})}),o&&"user"===o.account_type?Object(S.jsx)(y.a,{path:"/places",element:Object(S.jsx)(Se,{searchParams:g,freelancerData:d,services:p,setServices:m,setViewFreelancer:F,viewFreelancer:_})}):null,o&&!d.errors&&_&&"user"===o.account_type?Object(S.jsx)(y.a,{path:"/freelancer",element:Object(S.jsx)(Ae,{viewFreelancer:_,currentUser:o})}):null,Object(S.jsx)(y.a,{path:"/myprofile",element:Object(S.jsx)(ne,{currentUser:o})}),Object(S.jsx)(y.a,{path:"/account",element:Object(S.jsx)(De,{currentUser:o,setCurrentUser:l})})]}),P=Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,{path:"/login",element:Object(S.jsx)(z,{onLogin:l,accountType:n,setAccountType:r})}),Object(S.jsx)(y.a,{path:"/signup-user",element:Object(S.jsx)(I,{onLogin:l,accountType:n,setAccountType:r})})]});return Object(S.jsxs)("div",{className:"app",children:[Object(S.jsx)(C,{setCurrentUser:l,currentUser:o,setAccountType:r}),Object(S.jsx)(y.c,{children:o?T:P})]})},ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,343)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(S.jsx)(v.a,{children:Object(S.jsx)(Me,{})}),document.getElementById("root")),ze()}},[[241,1,2]]]);
//# sourceMappingURL=main.0b0e4a26.chunk.js.map